<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고객 지원 - 자주하는 질문</title>
    <link rel="stylesheet" href="../../header&footer/header.css">
    <link rel="stylesheet" href="../../header&footer/footer.css">
    <link rel="stylesheet" href="../../assets/css/qualify.css"> <!-- 기본 레이아웃 및 사이드바 스타일 -->
    <link rel="stylesheet" href="../../assets/css/sidebar-dropdown.css"> <!-- 사이드바 드롭다운 스타일 -->
    <link rel="stylesheet" href="../../assets/css/Q&A.css"> <!-- Q&A 페이지 전용 스타일 -->
    <script src="../../header&footer/header.js"></script>
    <script src="../../header&footer/footer.js"></script>
    <script src="../../assets/js/sidebar.js"></script> <!-- 사이드바 드롭다운 기능 -->
</head>
<body>

    <div id="header-container"></div>

    <main class="container">
        <aside class="sidebar">
            <h2>고객 지원</h2>
            <nav class="sidebar-nav">
                <div class="dropdown">
                    <h3>공지사항</h3>
                    <ul>
                        <li><a href="notice.html">공지 게시판</a></li>
                    </ul>
                </div>
                <div class="dropdown active">
                    <h3>자주하는 질문</h3>
                    <ul>
                        <li class="current-page"><a href="Q&A.html">Q&A</a></li>
                        <li><a href="FAQ.html">FAQ</a></li> <!-- 이 부분을 FAQ.html 연결 -->
                    </ul>
                </div>
                <div class="dropdown">
                    <h3>사이트 이용 안내</h3>
                    <ul>
                        <li><a href="guide.html">이용 안내 </a></li> <!-- guide.html로 연결 -->
                    </ul>
                </div>
            </nav>
        </aside>

        <div class="content">
            <div class="breadcrumb">
                <span>▶ 고객 지원</span>
                <span>&gt; 자주하는 질문</span>
                <span>&gt; Q&A</span>
            </div>

            <h2>자주하는 질문</h2>

            <div class="search-filter-area">
                <div class="search-conditions">
                    <label for="searchCondition">빠른 검색으로 질문과 답변을 찾아보세요.</label>
                    <select id="searchCondition">
                        <option value="all">전체</option>
                        <option value="category1">카테고리 1</option>
                        <option value="category2">카테고리 2</option>
                    </select>
                </div>
                <div class="search-input-group">
                    <input type="text" placeholder="검색어를 입력하세요" class="search-input">
                    <button class="search-button">검색</button>
                </div>
            </div>

            <div class="qna-list" id="qnaList">
                <!-- Q&A 항목들이 JavaScript로 채워질 부분 -->
            </div>

            <div class="pagination" id="paginationControls">
                <!-- JavaScript로 페이지 링크가 채워질 부분 -->
            </div>
        </div>
    </main>

    <div id="footer-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const qnaListElement = document.getElementById('qnaList');
            const paginationControls = document.getElementById('paginationControls');
            const itemsPerPage = 5; // 한 페이지에 표시될 Q&A 항목 수

            // 더미 Q&A 데이터
            const allQnaData = [
                { id: 1, question: '어린이집은 수료증으로 등록이 가능한가요?', answer: '영유아보호법에 의해 설치된 어린이집은 등록 가능합니다. 단, 자원봉사의 가치를 명확히 전달하며, 유급인력의 업무를 대체하지 않는 활동에 한해 자원봉사활동으로 운영 가능합니다.' },
                { id: 2, question: '어린이집은 수료증으로 등록이 가능한가요?', answer: '네, 가능합니다. 관련 법규를 확인해주세요.' },
                { id: 3, question: '어린이집은 수료증으로 등록이 가능한가요?', answer: '수료증 종류에 따라 가능 여부가 달라질 수 있습니다.' },
                { id: 4, question: '어린이집은 수료증으로 등록이 가능한가요?', answer: '자세한 내용은 담당 부서에 문의해주세요.' },
                { id: 5, question: '어린이집은 수료증으로 등록이 가능한가요?', answer: '네, 특정 조건 하에 등록이 허용됩니다.' },
                { id: 6, question: '케어메이트 신청은 어떻게 하나요?', answer: '홈페이지의 "도우미 신청" 메뉴를 통해 신청할 수 있습니다.' },
                { id: 7, question: '자격증 발급은 얼마나 걸리나요?', answer: '신청 후 7영업일 이내에 발급됩니다.' },
                { id: 8, question: '병원 찾기 기능은 어떻게 사용하나요?', answer: '메인 메뉴의 "병원 찾기"를 클릭하여 지역별 병원 정보를 확인할 수 있습니다.' },
                { id: 9, question: '개인정보는 안전하게 관리되나요?', answer: '네, 개인정보보호법에 따라 안전하게 관리됩니다.' },
                { id: 10, question: '서비스 이용 중 문제가 발생하면 어디로 문의해야 하나요?', answer: '고객 지원 센터로 문의하시거나, Q&A 게시판에 글을 남겨주세요.' },
                { id: 11, question: '환불 정책은 어떻게 되나요?', answer: '서비스 이용 약관을 참조하시거나 고객 지원에 문의해주세요.' },
                { id: 12, question: '모바일 앱이 있나요?', answer: '현재 모바일 웹만 지원하며, 앱은 추후 개발 예정입니다.' },
                { id: 13, question: '케어메이트 활동 시간은 자유롭게 조정 가능한가요?', answer: '네, 협의를 통해 유연하게 조정 가능합니다.' },
                { id: 14, question: '자격증 재발급은 어떻게 신청하나요?', answer: '자격증/확인서 페이지에서 재발급 신청이 가능합니다.' },
                { id: 15, question: '비밀번호를 잊어버렸어요.', answer: '로그인 페이지에서 "비밀번호 찾기" 기능을 이용해주세요.' },
                { id: 16, question: '서비스 이용료는 얼마인가요?', answer: '서비스 종류에 따라 다르며, 각 서비스 페이지에서 확인 가능합니다.' },
                { id: 17, question: '케어메이트 교육은 필수인가요?', answer: '네, 모든 케어메이트는 소정의 교육 과정을 이수해야 합니다.' },
                { id: 18, question: '게시물 삭제는 어떻게 하나요?', answer: '본인이 작성한 게시물은 마이페이지에서 삭제할 수 있습니다.' },
                { id: 19, question: '첨부파일이 열리지 않아요.', answer: '파일 형식과 뷰어 프로그램을 확인하시거나 고객 지원에 문의해주세요.' },
                { id: 20, question: '사이트 오류가 발생했어요.', answer: '오류 상황을 상세히 기록하여 고객 지원에 제보해주시면 빠르게 처리하겠습니다.' }
            ];

            let currentPage = 1; // 현재 페이지

            // Q&A 항목 렌더링 함수
            function renderQnaItems(page) {
                qnaListElement.innerHTML = ''; // 기존 내용 비우기
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const paginatedData = allQnaData.slice(start, end);

                paginatedData.forEach(item => {
                    const qnaItem = document.createElement('div');
                    qnaItem.classList.add('qna-item');
                    qnaItem.innerHTML = `
                        <div class="question">
                            <span class="q-label">Q.</span>
                            <span class="question-text">${item.question}</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="answer">
                            <span class="a-label">A.</span>
                            <span class="answer-text">${item.answer}</span>
                        </div>
                    `;
                    qnaListElement.appendChild(qnaItem);

                    // 아코디언 토글 기능 추가
                    const questionDiv = qnaItem.querySelector('.question');
                    const answerDiv = qnaItem.querySelector('.answer');
                    const toggleIcon = qnaItem.querySelector('.toggle-icon');

                    // 초기 상태: 답변 숨기기
                    answerDiv.style.display = 'none';
                    qnaItem.classList.remove('active'); // active 클래스 제거 (아이콘 회전용)

                    questionDiv.addEventListener('click', () => {
                        // 다른 열려있는 답변 닫기
                        document.querySelectorAll('.qna-item.active .answer').forEach(openAnswer => {
                            if (openAnswer !== answerDiv) { // 현재 클릭한 답변이 아니면
                                openAnswer.style.display = 'none';
                                openAnswer.closest('.qna-item').classList.remove('active');
                            }
                        });

                        // 현재 답변 토글
                        if (answerDiv.style.display === 'none') {
                            answerDiv.style.display = 'block';
                            qnaItem.classList.add('active');
                        } else {
                            answerDiv.style.display = 'none';
                            qnaItem.classList.remove('active');
                        }
                    });
                });
            }

            // 페이지네이션 컨트롤 렌더링 함수
            function renderPaginationControls() {
                paginationControls.innerHTML = ''; // 기존 내용 비우기
                const totalPages = Math.ceil(allQnaData.length / itemsPerPage);

                // 이전 페이지 버튼
                const prevLink = document.createElement('a');
                prevLink.href = '#';
                prevLink.classList.add('page-link', 'prev');
                prevLink.textContent = '‹'; // 이전 아이콘
                prevLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (currentPage > 1) {
                        currentPage--;
                        renderQnaItems(currentPage);
                        updateActivePaginationLink();
                    }
                });
                paginationControls.appendChild(prevLink);

                // 페이지 번호 링크
                for (let i = 1; i <= totalPages; i++) {
                    const pageLink = document.createElement('a');
                    pageLink.href = '#';
                    pageLink.classList.add('page-link');
                    pageLink.textContent = i;
                    if (i === currentPage) {
                        pageLink.classList.add('active');
                    }
                    pageLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        currentPage = i;
                        renderQnaItems(currentPage);
                        updateActivePaginationLink();
                    });
                    paginationControls.appendChild(pageLink);
                }

                // 다음 페이지 버튼
                const nextLink = document.createElement('a');
                nextLink.href = '#';
                nextLink.classList.add('page-link', 'next');
                nextLink.textContent = '›'; // 다음 아이콘
                nextLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (currentPage < totalPages) {
                        currentPage++;
                        renderQnaItems(currentPage);
                        updateActivePaginationLink();
                    }
                });
                paginationControls.appendChild(nextLink);
            }

            // 활성화된 페이지 링크 업데이트 함수
            function updateActivePaginationLink() {
                document.querySelectorAll('.page-link').forEach(link => {
                    link.classList.remove('active');
                });
                // '‹' (이전), '›' (다음) 버튼을 제외하고 현재 페이지에 해당하는 링크 활성화
                const pageLinks = document.querySelectorAll('.page-link:not(.prev):not(.next)');
                if (pageLinks[currentPage - 1]) {
                    pageLinks[currentPage - 1].classList.add('active');
                }
            }

            // 초기 렌더링
            renderQnaItems(currentPage);
            renderPaginationControls();
        });
    </script>

</body>
</html>